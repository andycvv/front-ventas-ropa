<h2 class="text-3xl font-bold mb-3">Listado de Productos</h2>

<div class="flex justify-between mb-4">
  <p-dropdown
    [options]="statusOptions"
    [(ngModel)]="selectedStatus"
    placeholder="Seleccionar Estado"
    (onChange)="filterProductsByStatus()"
    class="w-48"
  ></p-dropdown>
  <p-button
    label="Agregar Producto"
    icon="pi pi-plus"
    (click)="addProduct()"
  ></p-button>
</div>

<div class="border-1 border-gray-200 rounded-md pb-16">
  <p-table
      [value]="filteredProducts"
      [paginator]="true"
      [rows]="5"
      [tableStyle]="{ 'min-width': '50rem' }"
      [rowsPerPageOptions]="[5, 10, 20]"
  >
      <ng-template #header>
        <tr>
          <th style="width:16.6%">Nombre</th>
          <th style="width:16.6%">Descripcion</th>
          <th style="width:16.6%">Precio</th>
          <th style="width:16.6%">Categoria</th>
          <th style="width:16.6%">Estado</th>
          <th style="width:16.6%">
            Acciones
          </th>
      </tr>
      </ng-template>
      <ng-template #body let-product>
        <tr>
          <td>{{ product.name }}</td>
          <td>{{ product.description.length > 20 ? (product.description | slice:0:20) + '...' : product.description }}</td>
          <td>S/.{{ product.price }}</td>
          <td>{{ product.category.name }}</td>
          <td>
            @if (product.enabled) {
              <p-tag value="Habilitado" severity="success" icon="pi pi-check" />
            } @else {
              <p-tag value="Deshabilitado" severity="danger" icon="pi pi-times" />
            }
          </td>
          <td>
              <p-button type="button" icon="pi pi-pencil" (click)="editProduct(product.id)" text />
          </td>
      </tr>
      </ng-template>
  </p-table>
</div>